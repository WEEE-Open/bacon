#   README:
#   You need to use
#   docker network create --subnet=172.18.0.0/16 bacula_network
#   before being able to use this docker compose

#   Still Need to look into the 
#   build: ./directory_to_build
#   thing 

version: '2'

services:
  bacula-dir:
    build:
      context: ./mydirector
      dockerfile: ./Dockerfile
    image: bacula/director
    container_name: bacula-dir
    hostname: bacula-dir
    #tty: true
    #stdin_open: true
    #env_file: .env
    environment:
      DIRPASS: ${DIRPASS}
      FDPASS: ${FDPASS}
      SDPASS: ${SDPASS}
      DIRADDR: ${DIRADDR}
      FDADDR: ${FDADDR}
      SDADDR: ${SDADDR}
      FDRESTOREDIR: ${FDRESTOREDIR}
      FDBACKUPDIR: ${FDBACKUPDIR}
    
    # volumes: 
    #     #check if you need :ro

    #     #configs
    #     - ./volumes/configs/bacula-dir.conf:/etc/bacula/bacula-dir.conf
    #     - ./volumes/configs/bconsole.conf:/etc/bacula/bconsole.conf
    
    entrypoint: ./script_conf.sh
    expose:
      - 9101